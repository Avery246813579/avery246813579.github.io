<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Avery Durrant</title>
    <link rel="stylesheet" type="text/css" href="assets/style/general.css">
</head>
<body>

<div id="languages">
    <div class="l-block" style="background-color: chocolate">
        <div class="expand">Java</div>
    </div>
</div>

<div class="modal">
    <div class="content">
        <div class="wrapper">
            <div class="side">
                <div id="J1" class="bar">Knowledge</div>
                <br>

                <div id="J2" style="background-color: crimson">Years Known</div>
                <br>
            </div>

            <div class="projects" style="float: left">
                <div class="project">
                    SFD
                </div>
            </div>
        </div>
    </div>
</div>

<!--<div id="test3" class="test">-->
<!--Java:<br>-->
<!--<span>D</span>-->

<!--<div id="J1" style="background-color: brown">Knowledge</div>-->
<!--<br>-->

<!--<div id="J2" style="background-color: crimson">Years Learnt</div>-->
<!--<br>-->

<!--<div id="J3" style="background-color: chocolate">Dogs</div>-->
<!--</div>-->

<!--<div class="language">-->
<!--Java:-->
<!--<div class="block">-->
<!--<span id="test" class="animate"></span>-->
<!--<span id="test2" class="animate"></span>-->
<!--</div>-->
<!--</div>-->

<script src="assets/scripts/helper.js"></script>
<script>
    var modal = document.getElementsByClassName('modal')[0];

    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
            document.getElementById('J1').style.width = "0%"
        }
    };

    readTextFile('assets/json/languages.JSON', function(err, payload){
        if(err){
            console.log("ERROR");
            return;
        }

        var content = JSON.parse(payload), toAdd = '<div class="row">';
        for(var j = 0; j < content.length; j++) {
            toAdd += '<div class="l-block" style="background-color: chocolate"><div class="expand">' + content[j]['name'] + '</div></div>';

            if (j == 5 || j == 11) {
                toAdd += '</div>';

                if(j == 5){
                    toAdd += '<div class="row">'
                }
            }
        }

        document.getElementById('languages').innerHTML = toAdd;

        var languages = document.getElementsByClassName('l-block');
        for (var i = 0; i < languages.length; i++) {
            (function () {
                var expand = languages[i].getElementsByClassName('expand')[0];

                languages[i].style.height = "100px";

                var lang = languages[i];
                languages[i].onmouseover = function () {
                    expand.style.top = "50px";
                    lang.parentElement.style.height = "150px";
                };

                languages[i].onmouseout = function () {
                    expand.style.top = "40px";
                    lang.parentElement.style.height = "125px";
                };

                languages[i].onclick = function () {
                    modal.style.display = "block";

                    setTimeout(function () {
                        document.getElementById('J1').style.width = "50%"
                    }, 100);
                };
            })();
        }
    });
</script>

</body>
</html>